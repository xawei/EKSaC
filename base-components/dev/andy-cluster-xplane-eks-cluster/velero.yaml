chart:
  name: velero
  repoURL: https://vmware-tanzu.github.io/helm-charts
  targetRevision: 10.0.10
  namespace: velero
  syncWave: "0"
  values:
    credentials:
      useSecret: false
    serviceAccount:
      server:
        create: true
        annotations:
          eks.amazonaws.com/role-arn: arn:aws:iam::249140151390:role/VeleroRole-andy-cluster-xplane-eks-cluster
    initContainers:
      - name: velero-plugin-for-aws
        image: velero/velero-plugin-for-aws:v1.5.0
        volumeMounts:
          - mountPath: /target
            name: plugins
    tolerations:
      - key: "karpenter.sh/nodepool"
        operator: "Equal"
        value: "infra"
        effect: "NoSchedule"
    # Disable CRD installation to avoid conflicts
    installCRDs: false
    # Or use upgrade CRDs hook
    upgradeCRDs: false
    # AWS provider configuration
    configuration:
      provider: aws
      backupStorageLocation:
        name: default
        provider: aws
        bucket: velero-backup-andy-cluster-xplane-eks-cluster  # Replace with your actual S3 bucket name
        config:
          region: ap-southeast-1  # Replace with your AWS region
      volumeSnapshotLocation:
        name: default
        provider: aws
        config:
          region: ap-southeast-1  # Replace with your AWS region